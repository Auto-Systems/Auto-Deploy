# -----------------------------------------------
# !!! THIS FILE WAS GENERATED BY TYPE-GRAPHQL !!!
# !!!   DO NOT MODIFY THIS FILE BY YOURSELF   !!!
# -----------------------------------------------

input ApproveNodeRequestInput {
  storage: String!
  network: String!
  host: String!
}

type AuthOutput {
  token: String!
  success: Boolean!
  role: [UserRole!]!
}

interface BaseCoreNode {
  name: String!
  id: String!
}

type CommandResult {
  id: ID!
  createdAt: DateTime!
  command: String!
  result: String!
}

type Configuration {
  id: ID!
  createdAt: DateTime!
  controllerHost: String
}

input ConfigurationInput {
  username: String!
  activeControllerId: Int!
}

type Controller {
  id: ID!
  createdAt: DateTime!
  active: Boolean!
  name: String!
}

type ControllerNode implements BaseCoreNode {
  name: String!
  id: String!
}

enum ControllerxNodeTypes {
  NETWORK
  STORAGE
  HOST
  CORE_TEMPLATE
}

interface CoreNode {
  name: String!
  id: String!
}

type CoreTemplate {
  id: ID!
  createdAt: DateTime!
  name: String!
  os: NodeOS!
  nodeAuth: NodeAuth!
  itemID: String!
}

input CreateCoreTemplateInput {
  itemID: String!
  name: String!
  os: NodeOS!
  nodeAuth: NodeAuthInput!
}

input CreateLifecycleInput {
  nodeId: String!
  env: [LCENV!]!
  file: String!
}

"""
The javascript `Date` as string. Type represents date and time as the ISO Date string.
"""
scalar DateTime

input ENV {
  key: String!
  value: String!
}

input InitialConfigurationInput {
  username: String!
  controllerConnection: String!
  initialControllerGit: String!
  initialProvisionerGit: String!
}

type InitialModule {
  name: String!
  git: String!
}

type InitialModules {
  name: String!
  type: ModuleType!
  git: String!
}

input InstallModuleInput {
  name: String!
  type: ModuleType!
  git: String!
}

input LCENV {
  key: String!
  value: String!
}

type Library {
  name: String!
  id: String!
  description: String!
  items(filter: LibraryItemFilter): [LibraryItem!]!
}

type LibraryItem {
  name: String!
  id: String!
  type: LibraryItemType!
  description: String!
}

input LibraryItemFilter {
  name: String
  type: LibraryItemType
}

enum LibraryItemType {
  nodeTemplate
  iso
  file
  templateFile
}

type Lifecycle {
  id: ID!
  createdAt: DateTime!
  node: ManagedNode!
}

type Log {
  id: ID!
  createdAt: DateTime!
  commandResults: [CommandResult!]!
}

input LoginInput {
  username: String!
  password: String!
}

type ManagedNode {
  id: ID!
  createdAt: DateTime!
  name: String!
  coreTemplate: CoreTemplate!

  """Controller's Node ID"""
  node: String!
  logs: [Log!]!
}

type Module {
  type: ModuleType!
  name: String!
  git: String!
}

enum ModuleType {
  CONTROLLER
  PROVISIONER
}

type Mutation {
  login(input: LoginInput!): AuthOutput!
  initialConfiguration(input: InitialConfigurationInput!): Boolean!
  addUser(username: String!): Boolean!
  saveConfiguration(input: SaveConfigurationInput!): Configuration!
  installModule(input: InstallModuleInput!): Module!
  downloadController(git: String!): Boolean!
  createCoreTemplate(input: CreateCoreTemplateInput!): CoreTemplate!
  approveNodeRequest(input: ApproveNodeRequestInput!, requestId: String!): ManagedNode!
  getMyNodeRequests: [NodeRequest!]!
  submitNodeRequest(input: SubmitNodeRequestInput!): NodeRequest!
  createLifecycle(input: CreateLifecycleInput!): Boolean!
  startLifecycle(nodeId: String!): String!
  provisionNode(nodeId: String!): Boolean!
  testAuth(command: String!, nodeId: String!): String!
  uploadConfiguration(env: [ENV!]!, file: String!, nodeId: String!): String!
}

"""Auto Deploy Node"""
type Node implements CoreNode {
  name: String!
  id: String!
  power: NodePower!
}

type NodeAuth {
  username: String!
  password: String!
}

input NodeAuthInput {
  username: String!
  password: String!
}

enum NodeOS {
  UBUNTU
  DEBIAN
}

enum NodePower {
  ON
  OFF
  SUSPENDED
}

type NodeRequest {
  id: ID!
  createdAt: DateTime!
  name: String!
  user: User!
  coreTemplate: CoreTemplate!
  purpose: String!
  configurationFile: String
  state: NodeRequestState!
}

enum NodeRequestState {
  SUBMITTED
  APPROVED
  DENIED
}

type Provisioner {
  id: ID!
  createdAt: DateTime!
  active: Boolean!
  name: String!
}

type Query {
  userCheck: UserCheck!
  configuration: Configuration!
  getInitialControllers: [InitialModule!]!
  getIntialProvisioners: [InitialModule!]!
  getSetupCompleted(secret: String!): Boolean!
  initialModules(type: ModuleType): [InitialModules!]!
  getControllerNodes(type: ControllerxNodeTypes!): [ControllerNode!]!
  getControllerNode(id: String!, type: ControllerxNodeTypes!): ControllerNode!
  controllers: [Controller!]!
  coreTemplates: [CoreTemplate!]!
  libraries: [Library!]!
  libraryItem(id: String!): LibraryItem!
  libraryItems: [LibraryItem!]!
  getAllManagedNodes: [ManagedNode!]!
  managedNodes: [ManagedNode!]!
  managedNode(nodeId: String!): ManagedNode!
  nodeRequests(state: NodeRequestState!): [NodeRequest!]!

  """Returns nodes from active controller module"""
  nodes: [Node]!
  testNodeStuff(nodeId: String!): Boolean!
  lsFiles(path2: String!, path: String!, IP2: String!, IP: String!): Boolean!
  testConfig(id: String!): Boolean!
}

input SaveConfigurationInput {
  controllerHost: String!
}

input SubmitNodeRequestInput {
  name: String!
  coreTemplateId: String!
  purpose: String!
  configurationFile: String
  env: [ENV!]
}

type User {
  id: ID!
  createdAt: DateTime!
  username: String!
}

type UserCheck {
  isAuthed: Boolean!
  role: [UserRole!]!
}

enum UserRole {
  GUEST
  USER
  ADMIN
}
